webpackJsonp([1],{265:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(288);t.default=a.a},269:function(e,t,n){"use strict";n(19),n(63),n(271)},270:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e){return"string"===typeof e}function r(e){return o(e.type)&&S(e.props.children)?k.default.cloneElement(e,{},e.props.children.split("").join(" ")):o(e)?(S(e)&&(e=e.split("").join(" ")),k.default.createElement("span",null,e)):e}Object.defineProperty(t,"__esModule",{value:!0});var i=n(6),c=a(i),s=n(14),l=a(s),u=n(2),p=a(u),d=n(3),f=a(d),b=n(4),m=a(b),h=n(5),y=a(h),g=n(7),v=a(g),w=n(0),k=a(w),x=n(98),_=a(x),E=n(64),O=a(E),j=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols)for(var o=0,a=Object.getOwnPropertySymbols(e);o<a.length;o++)t.indexOf(a[o])<0&&(n[a[o]]=e[a[o]]);return n},C=/^[\u4e00-\u9fa5]{2}$/,S=C.test.bind(C),N=function(e){function t(){return(0,p.default)(this,t),(0,m.default)(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return(0,y.default)(t,e),(0,f.default)(t,[{key:"render",value:function(){var e,t=this.props,n=t.children,a=t.className,o=t.prefixCls,i=t.type,s=t.size,u=t.inline,p=t.disabled,d=t.icon,f=t.loading,b=t.activeStyle,m=t.activeClassName,h=t.onClick,y=j(t,["children","className","prefixCls","type","size","inline","disabled","icon","loading","activeStyle","activeClassName","onClick"]),g=f?"loading":d,w=(0,v.default)(o,a,(e={},(0,l.default)(e,o+"-primary","primary"===i),(0,l.default)(e,o+"-ghost","ghost"===i),(0,l.default)(e,o+"-warning","warning"===i),(0,l.default)(e,o+"-small","small"===s),(0,l.default)(e,o+"-inline",u),(0,l.default)(e,o+"-disabled",p),(0,l.default)(e,o+"-loading",f),(0,l.default)(e,o+"-icon",!!g),e)),x=k.default.Children.map(n,r),E=void 0;if("string"===typeof g)E=k.default.createElement(O.default,{"aria-hidden":"true",type:g,size:"small"===s?"xxs":"md",className:o+"-icon"});else if(g){var C=g.props&&g.props.className,S=(0,v.default)("am-icon",o+"-icon","small"===s?"am-icon-xxs":"am-icon-md");E=k.default.cloneElement(g,{className:C?C+" "+S:S})}return k.default.createElement(_.default,{activeClassName:m||(b?o+"-active":void 0),disabled:p,activeStyle:b},k.default.createElement("a",(0,c.default)({role:"button",className:w},y,{onClick:p?void 0:h,"aria-disabled":p}),E,x))}}]),t}(k.default.Component);N.defaultProps={prefixCls:"am-button",size:"large",inline:!1,disabled:!1,loading:!1,activeStyle:{}},t.default=N,e.exports=t.default},271:function(e,t,n){var a=n(272);"string"===typeof a&&(a=[[e.i,a,""]]);var o={hmr:!1};o.transform=void 0;n(263)(a,o);a.locals&&(e.exports=a.locals)},272:function(e,t,n){t=e.exports=n(262)(!1),t.push([e.i,'.am-button{display:block;outline:0 none;-webkit-appearance:none;-webkit-box-sizing:border-box;box-sizing:border-box;padding:0;text-align:center;font-size:18px;height:47px;line-height:47px;overflow:hidden;text-overflow:ellipsis;word-break:break-word;white-space:nowrap;color:#000;background-color:#fff;border:1px solid #ddd;border-radius:5px}@media (-webkit-min-device-pixel-ratio:2),(min-resolution:2dppx){html:not([data-scale]) .am-button{position:relative;border:none}html:not([data-scale]) .am-button:before{content:"";position:absolute;left:0;top:0;width:200%;height:200%;border:1px solid #ddd;border-radius:10px;-webkit-transform-origin:0 0;transform-origin:0 0;-webkit-transform:scale(.5);transform:scale(.5);-webkit-box-sizing:border-box;box-sizing:border-box;pointer-events:none}}.am-button-borderfix:before{-webkit-transform:scale(.49)!important;transform:scale(.49)!important}.am-button.am-button-active{background-color:#ddd}.am-button.am-button-disabled{color:rgba(0,0,0,.3);opacity:.6}.am-button-primary{color:#fff;background-color:#108ee9;border:1px solid #108ee9;border-radius:5px}@media (-webkit-min-device-pixel-ratio:2),(min-resolution:2dppx){html:not([data-scale]) .am-button-primary{position:relative;border:none}html:not([data-scale]) .am-button-primary:before{content:"";position:absolute;left:0;top:0;width:200%;height:200%;border:1px solid #108ee9;border-radius:10px;-webkit-transform-origin:0 0;transform-origin:0 0;-webkit-transform:scale(.5);transform:scale(.5);-webkit-box-sizing:border-box;box-sizing:border-box;pointer-events:none}}.am-button-primary.am-button-active{color:hsla(0,0%,100%,.3);background-color:#0e80d2}.am-button-primary.am-button-disabled{color:hsla(0,0%,100%,.6);opacity:.4}.am-button-ghost{color:#108ee9;background-color:transparent;border:1px solid #108ee9;border-radius:5px}@media (-webkit-min-device-pixel-ratio:2),(min-resolution:2dppx){html:not([data-scale]) .am-button-ghost{position:relative;border:none}html:not([data-scale]) .am-button-ghost:before{content:"";position:absolute;left:0;top:0;width:200%;height:200%;border:1px solid #108ee9;border-radius:10px;-webkit-transform-origin:0 0;transform-origin:0 0;-webkit-transform:scale(.5);transform:scale(.5);-webkit-box-sizing:border-box;box-sizing:border-box;pointer-events:none}}.am-button-ghost.am-button-active{color:rgba(16,142,233,.6);background-color:transparent;border:1px solid rgba(16,142,233,.6);border-radius:5px}@media (-webkit-min-device-pixel-ratio:2),(min-resolution:2dppx){html:not([data-scale]) .am-button-ghost.am-button-active{position:relative;border:none}html:not([data-scale]) .am-button-ghost.am-button-active:before{content:"";position:absolute;left:0;top:0;width:200%;height:200%;border:1px solid rgba(16,142,233,.6);border-radius:10px;-webkit-transform-origin:0 0;transform-origin:0 0;-webkit-transform:scale(.5);transform:scale(.5);-webkit-box-sizing:border-box;box-sizing:border-box;pointer-events:none}}.am-button-ghost.am-button-disabled{color:rgba(0,0,0,.1);border:1px solid rgba(0,0,0,.1);border-radius:5px;opacity:1}@media (-webkit-min-device-pixel-ratio:2),(min-resolution:2dppx){html:not([data-scale]) .am-button-ghost.am-button-disabled{position:relative;border:none}html:not([data-scale]) .am-button-ghost.am-button-disabled:before{content:"";position:absolute;left:0;top:0;width:200%;height:200%;border:1px solid rgba(0,0,0,.1);border-radius:10px;-webkit-transform-origin:0 0;transform-origin:0 0;-webkit-transform:scale(.5);transform:scale(.5);-webkit-box-sizing:border-box;box-sizing:border-box;pointer-events:none}}.am-button-warning{color:#fff;background-color:#e94f4f}.am-button-warning.am-button-active{color:hsla(0,0%,100%,.3);background-color:#d24747}.am-button-warning.am-button-disabled{color:hsla(0,0%,100%,.6);opacity:.4}.am-button-inline{display:inline-block;padding:0 15px}.am-button-small{font-size:13px;height:30px;line-height:30px;padding:0 15px}.am-button-icon{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center}.am-button>.am-button-icon{margin-right:.5em}',""])},274:function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function r(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n.d(t,"a",function(){return f});var i,c,s=n(0),l=n.n(s),u=n(1),p=n.n(u),d=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),f=(c=i=function(e){function t(){return a(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return r(t,e),d(t,[{key:"render",value:function(){var e=this.props.cnt;return l.a.createElement("section",{className:"markdown-body",dangerouslySetInnerHTML:{__html:e}})}}]),t}(s.PureComponent),i.propTypes={cnt:p.a.string},c)},275:function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function r(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n.d(t,"a",function(){return x});var i,c,s=n(269),l=(n.n(s),n(270)),u=n.n(l),p=n(100),d=(n.n(p),n(101)),f=n.n(d),b=n(0),m=n.n(b),h=n(1),y=n.n(h),g=n(99),v=n.n(g),w=n(97),k=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),x=(c=i=function(e){function t(){var e,n,r,i;a(this,t);for(var c=arguments.length,s=Array(c),l=0;l<c;l++)s[l]=arguments[l];return n=r=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),r.state={content:""},r.handleInput=function(e){var t=e.target;r.setState({content:t.value})},r.handleCommit=function(){var e=r.state.content;if(!e)return void f.a.fail("\u8bf7\u8f93\u5165\u5185\u5bb9\uff01");var t=r.props,n=t.atk,a=t.topicId,o=t.replyId,i=t.handleSucc;w.a.post("topic/"+a+"/replies",Object.assign({accesstoken:n,content:e},o?{reply_id:o}:{})).then(function(e){e.success&&(f.a.success("\u8bc4\u8bba\u6210\u529f\uff01"),setTimeout(function(){i()},3e3))})},i=n,o(r,i)}return r(t,e),k(t,[{key:"componentDidMount",value:function(){var e=this.props.replayName;e&&this.setState({content:"@"+e+" "})}},{key:"render",value:function(){var e=this.state.content,t=this.props.handleCancel;return m.a.createElement("div",{className:v.a.comment},m.a.createElement("textarea",{className:v.a.textarea,value:e,onChange:this.handleInput}),m.a.createElement("div",{className:v.a.btns},m.a.createElement(u.a,{inline:!0,size:"small",type:"primary",className:v.a.btn,onClick:this.handleCommit},"\u56de\u590d"),t&&m.a.createElement(u.a,{inline:!0,size:"small",type:"ghost",className:v.a.btn,onClick:t},"\u53d6\u6d88")))}}]),t}(b.PureComponent),i.propTypes={topicId:y.a.string,replyId:y.a.string,replayName:y.a.string,atk:y.a.string.isRequired,handleSucc:y.a.func,handleCancel:y.a.func},c)},288:function(e,t,n){"use strict";function a(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function a(o,r){try{var i=t[o](r),c=i.value}catch(e){return void n(e)}if(!i.done)return Promise.resolve(c).then(function(e){a("next",e)},function(e){a("throw",e)});e(c)}return a("next")})}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n.d(t,"a",function(){return N});var c,s,l,u,p=n(102),d=(n.n(p),n(103)),f=n.n(d),b=n(65),m=n.n(b),h=n(105),y=(n.n(h),n(107)),g=n.n(y),v=n(0),w=n.n(v),k=n(8),x=n(1),_=n.n(x),E=n(97),O=n(108),j=n(289),C=n(291),S=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),N=(c=Object(k.inject)("_GV_","user"))(s=Object(k.observer)((u=l=function(e){function t(e){o(this,t);var n=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={topic:{},showBackTop:!1,refreshing:!1,list:[],dataSource:new g.a.DataSource({rowHasChanged:function(e,t){return e.id!==t.id||e.showComment!==t.showComment}}),pageSize:14,height:(document.documentElement.clientHeight||document.body.clientHeight)-45},n.handleScroll=function(e){n.setState({showBackTop:e.target.scrollTop>200})},n.handleBackTop=function(){n.setState({showBackTop:!1},function(){n.listViewRef.scrollTo(0)})},n.handleRefresh=function(){n.setState({refreshing:!0},n.queryData)},n.handleReply=function(e){var t=n.state.list.map(function(t,n){return Object.assign({},t,{showComment:n===+e})});n.setState({dataSource:n.state.dataSource.cloneWithRows(t)})},n.queryData=n.queryData.bind(n),n}return i(t,e),S(t,[{key:"componentDidMount",value:function(){this.queryData()}},{key:"queryData",value:function(){function e(){return t.apply(this,arguments)}var t=a(m.a.mark(function e(){var t,n,a,o,r,i,c;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props,n=t.match.params,a=t._GV_.setTitle,o=t.user.accessToken,a({title:""}),e.next=4,E.a.get("topic/"+n.id+"?mdrender=true&accesstoken="+o);case 4:r=e.sent,i=r.success,c=r.data,i&&this.setState({topic:c,refreshing:!1,list:c.replies,dataSource:this.state.dataSource.cloneWithRows(c.replies||[])});case 8:case"end":return e.stop()}},e,this)}));return e}()},{key:"render",value:function(){var e=this,t=this.state,n=t.topic,a=t.showBackTop,o=t.dataSource,r=t.height,i=t.pageSize,c=t.refreshing,s=this.props.user.accessToken;return w.a.createElement(v.Fragment,null,w.a.createElement(g.a,{ref:function(t){e.listViewRef=t},dataSource:o,pageSize:i,style:{height:r,overflow:"auto"},onScroll:this.handleScroll,scrollEventThrottle:800,scrollRenderAheadDistance:400,pullToRefresh:w.a.createElement(f.a,{refreshing:c,onRefresh:this.handleRefresh}),renderHeader:function(){return w.a.createElement(j.a,{topic:n,atk:s})},renderRow:function(t,a,o){return w.a.createElement(C.a,{key:t.id,rowId:+o,data:t,atk:s,topicId:n.id,author:n.author&&n.author.loginname,handleSucc:e.queryData,handleReply:function(){return e.handleReply(o)},handleCancel:function(){return e.handleReply(-1)}})}}),w.a.createElement(O.a,{show:a,handleClick:this.handleBackTop}))}}]),t}(v.Component),l.propTypes={_GV_:_.a.shape({setTitle:_.a.func.isRequired}).isRequired,user:_.a.shape({accessToken:_.a.string.isRequired}).isRequired,match:_.a.shape({params:_.a.shape({id:_.a.string.isRequired}).isRequired}).isRequired},s=u))||s)||s},289:function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function r(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n.d(t,"a",function(){return x});var i,c,s=n(269),l=(n.n(s),n(270)),u=n.n(l),p=n(0),d=n.n(p),f=n(1),b=n.n(f),m=n(109),h=n(290),y=n(99),g=n.n(y),v=n(274),w=n(275),k=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),x=(c=i=function(e){function t(){var e,n,r,i;a(this,t);for(var c=arguments.length,s=Array(c),l=0;l<c;l++)s[l]=arguments[l];return n=r=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),r.state={showComment:!1},r.handleToggleReply=function(){r.setState({showComment:!r.state.showComment})},i=n,o(r,i)}return r(t,e),k(t,[{key:"render",value:function(){var e=this.props,t=e.topic,n=e.atk,a=this.state.showComment;return d.a.createElement("div",{className:g.a.topic},d.a.createElement("h2",{className:g.a.title},(t.good||t.top)&&d.a.createElement("span",{className:g.a["tag-wrap"]},d.a.createElement(m.a,{good:t.good,top:t.top,tab:t.tab,clsName:g.a.tag})),t.title),t.author&&d.a.createElement(h.a,{topic:t,atk:n}),d.a.createElement(v.a,{cnt:t.content}),d.a.createElement("h3",{className:g.a["reply-header"]},d.a.createElement("strong",null,d.a.createElement("span",{className:g.a["reply-count"]},t.reply_count),"\u56de\u590d"),d.a.createElement(u.a,{inline:!0,size:"small",type:"ghost",className:g.a["reply-add"],onClick:this.handleToggleReply},a?"\u53d6\u6d88":"\u6dfb\u52a0\u56de\u590d")),d.a.createElement("div",{style:{display:a?"block":"none"}},d.a.createElement(w.a,{atk:n,topicId:t.id})))}}]),t}(p.Component),i.propTypes={topic:b.a.object,atk:b.a.string.isRequired},c)},290:function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function r(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i,c,s=n(269),l=(n.n(s),n(270)),u=n.n(l),p=n(0),d=n.n(p),f=n(1),b=n.n(f),m=n(9),h=n(99),y=n.n(h),g=n(62),v=n(97),w=n(110),k=n.n(w),x=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),_=(c=i=function(e){function t(){var e,n,r,i;a(this,t);for(var c=arguments.length,s=Array(c),l=0;l<c;l++)s[l]=arguments[l];return n=r=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),r.state={isCollect:!1},r.handleCollect=function(){var e=r.props,t=e.topic.id,n=e.atk,a=e.history;if(Object(g.a)(n,a)){var o=r.state.isCollect;v.a.post("topic_collect/"+(o?"de_collect ":"collect "),{accesstoken:n,topic_id:t}).then(function(e){e.success&&r.setState({isCollect:!o})})}},i=n,o(r,i)}return r(t,e),x(t,[{key:"componentDidMount",value:function(){this.setState({isCollect:this.props.topic.is_collect})}},{key:"render",value:function(){var e=this.props.topic,t=this.state.isCollect;return d.a.createElement("section",{className:y.a.info},d.a.createElement(m.Link,{to:"/user/"+e.author_id},d.a.createElement("span",{className:y.a.avatar,style:{backgroundImage:"url("+e.author.avatar_url+")"}})),d.a.createElement("div",{className:y.a.center},d.a.createElement("span",null,e.author.loginname," \xb7 \u53d1\u5e03\u4e8e ",Object(g.c)(e.create_at)),d.a.createElement("span",null,"\u6765\u81ea ",k.a[e.tab]," \xb7 ",e.visit_count," \u6b21\u6d4f\u89c8")),d.a.createElement("div",{className:y.a["collect-wrap"]},d.a.createElement(u.a,{className:y.a.collect,onClick:this.handleCollect,type:t?"ghost":"primary"},t?"\u53d6\u6d88\u6536\u85cf":"\u6536\u85cf")))}}]),t}(p.PureComponent),i.propTypes={topic:b.a.object.isRequired,atk:b.a.string.isRequired,history:b.a.object.isRequired},c);t.a=Object(m.withRouter)(_)},291:function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function r(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i,c,s=n(0),l=n.n(s),u=n(1),p=n.n(u),d=n(9),f=n(274),b=n(27),m=n(275),h=n(99),y=n.n(h),g=n(62),v=n(97),w=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),k=(c=i=function(e){function t(){var e,n,r,i;a(this,t);for(var c=arguments.length,s=Array(c),l=0;l<c;l++)s[l]=arguments[l];return n=r=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),r.state={uped:!1,count:0},r.handleUp=function(){var e=r.props,t=e.data,n=t.id,a=t.is_uped,o=e.atk,i=e.history;Object(g.a)(o,i)&&v.a.post("reply/"+n+"/ups ",{accesstoken:o}).then(function(e){var t=e.success,n=e.action;t&&r.setState({uped:"up"===n,count:a?"down"===n?-1:0:"up"===n?1:0})})},i=n,o(r,i)}return r(t,e),w(t,[{key:"componentDidMount",value:function(){this.setState({uped:this.props.data.is_uped})}},{key:"render",value:function(){var e=this.props,t=e.data,n=e.rowId,a=e.atk,o=e.topicId,r=e.author,i=e.handleSucc,c=e.handleCancel,s=e.handleReply,u=this.state,p=u.uped,h=u.count;return l.a.createElement("div",{id:t.id,className:y.a.reply},l.a.createElement("section",{className:y.a.user},l.a.createElement(d.Link,{to:"/user/"+t.author.loginname},l.a.createElement("span",{className:y.a.avatar,style:{backgroundImage:"url("+t.author.avatar_url+")"}})),l.a.createElement("div",{className:y.a["reply-info"]},l.a.createElement("span",{className:y.a["reply-left"]},l.a.createElement("span",{className:y.a["reply-name"]},t.author.loginname),l.a.createElement("a",{href:"#"+t.id,className:y.a.anchor},n+1," \u697c \xb7 ",Object(g.c)(t.create_at)),t.author.loginname===r&&l.a.createElement("span",{className:y.a["tag-author"]},"\u4f5c\u8005")),l.a.createElement("span",{className:y.a["reply-right"]},l.a.createElement(b.a,{type:p?"uped":"up",color:"#333",onClick:this.handleUp}),l.a.createElement("span",{className:y.a["up-count"]},t.ups.length+h),l.a.createElement(b.a,{type:"reply",color:"#333",onClick:s})))),l.a.createElement(f.a,{cnt:t.content}),t.showComment&&l.a.createElement(m.a,{atk:a,topicId:o,replyId:t.id,replayName:t.author.loginname,handleSucc:i,handleCancel:c}))}}]),t}(s.PureComponent),i.propTypes={data:p.a.object,rowId:p.a.number,author:p.a.string,topicId:p.a.string,handleSucc:p.a.func,handleReply:p.a.func,handleCancel:p.a.func,atk:p.a.string.isRequired,history:p.a.object.isRequired},c);t.a=Object(d.withRouter)(k)}});